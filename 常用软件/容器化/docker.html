<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="keywords" content="è‡ªæˆ‘æå‡,æ•ˆç‡æå‡,èŒåœºç»éªŒ,å­¦ä¹ ç¬”è®°" />
    <meta name="360-site-verification" content="deb32fab1ab57ddf02d8c5b4cc37025c" />
    <meta name="msvalidate.01" content="034FE00C2DAE4BC3B10D36ABBE467614" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #4089ab;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <!--  #252232 --> 
    <meta property="og:url" content="https://myblog.camscanner.top/%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/%E5%AE%B9%E5%99%A8%E5%8C%96/docker.html"><meta property="og:site_name" content="Navyum's Blog"><meta property="og:title" content="docker"><meta property="og:description" content="client-server æ¶æ„ docker clientä½¿ç”¨REST APIï¼Œé€šè¿‡UDSæˆ–è€…networkï¼Œä¸dockerdè¿›è¡Œé€šä¿¡ Img Docker Registries ç”¨æ¥å­˜å‚¨Docker Images é»˜è®¤ä½¿ç”¨Docker Hub Registries å¸¸ç”¨çš„registriesï¼š Docker Hub ECR GCR ACR è‡ªå»ºï¼šH..."><meta property="og:type" content="article"><meta property="og:image" content="https://raw.staticdn.net/Navyum/imgbed/main/IMG/a2959a6248c161ea2a84e671c8a5d38d.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-06-23T10:51:59.000Z"><meta property="article:author" content="Navyum"><meta property="article:tag" content="Docker"><meta property="article:published_time" content="2025-06-17T15:18:52.000Z"><meta property="article:modified_time" content="2025-06-23T10:51:59.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"docker","image":["https://raw.staticdn.net/Navyum/imgbed/main/IMG/a2959a6248c161ea2a84e671c8a5d38d.png","https://raw.staticdn.net/Navyum/imgbed/pic/IMG/385b08ca5b077a3bf9bced726581755b.png","https://raw.staticdn.net/Navyum/imgbed/pic/IMG/83843a52e15b6b08952df8a8999ce5e3.png","https://raw.staticdn.net/Navyum/imgbed/pic/IMG/832031b8fb17ede21a4e43cd2b00fdd0.png"],"datePublished":"2025-06-17T15:18:52.000Z","dateModified":"2025-06-23T10:51:59.000Z","author":[{"@type":"Person","name":"Navyum"}]}</script><link rel="alternate" type="application/atom+xml" href="https://myblog.camscanner.top/atom.xml" title="Navyum's Blog Atom Feed"><link rel="alternate" type="application/json" href="https://myblog.camscanner.top/feed.json" title="Navyum's Blog JSON Feed"><link rel="alternate" type="application/rss+xml" href="https://myblog.camscanner.top/rss.xml" title="Navyum's Blog RSS Feed"><link rel="icon" href="/favicon.ico"><title>docker | Navyum's Blog</title><meta name="description" content="client-server æ¶æ„ docker clientä½¿ç”¨REST APIï¼Œé€šè¿‡UDSæˆ–è€…networkï¼Œä¸dockerdè¿›è¡Œé€šä¿¡ Img Docker Registries ç”¨æ¥å­˜å‚¨Docker Images é»˜è®¤ä½¿ç”¨Docker Hub Registries å¸¸ç”¨çš„registriesï¼š Docker Hub ECR GCR ACR è‡ªå»ºï¼šH...">
    <link rel="stylesheet" href="/assets/css/styles.08b9eca3.css">
    <link rel="preload" href="/assets/js/runtime~app.4343b326.js" as="script"><link rel="preload" href="/assets/css/styles.08b9eca3.css" as="style"><link rel="preload" href="/assets/js/1181.88d0b359.js" as="script"><link rel="preload" href="/assets/js/app.0aa5305f.js" as="script">
    
    <!-- ç»Ÿè®¡ä»£ç åŒºåŸŸ-->
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">Navyum&#39;s Blog</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="ä¸»é¡µ" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="meteor-icons:home" height="1em" sizing="height"></iconify-icon><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog.html" aria-label="åšå®¢" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:blog" height="1em" sizing="height"></iconify-icon><!--]-->åšå®¢<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ€è€ƒ"><!--[--><iconify-icon class="vp-icon" icon="icon-park-outline:thinking-problem" height="1em" sizing="height"></iconify-icon>æ€è€ƒ<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C/" aria-label="é¢è¯•ç»éªŒ" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="fluent:people-chat-24-regular" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->é¢è¯•ç»éªŒ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E4%B8%AA%E4%BA%BA%E6%80%9D%E8%80%83/" aria-label="ä¸ªäººæ€è€ƒ" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="icon-park-outline:thinking-problem" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->ä¸ªäººæ€è€ƒ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E6%88%91%E7%9A%84%E4%B8%96%E7%95%8C/" aria-label="æˆ‘çš„ä¸–ç•Œ" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="streamline-plump:world-remix" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->æˆ‘çš„ä¸–ç•Œ<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="auto-link external-link" href="https://www.notion.so/navyum/1c42fcd1fefa4e948d8514761b2ab8c7?v=0ca5dc6ee29e4c2787dbd0f1055b4ed0" aria-label="è¯»ä¹¦" rel="noopener noreferrer" target="_blank" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-brands:readme" height="1em" sizing="height"></iconify-icon><!--]-->è¯»ä¹¦<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/intro.html" aria-label="è”ç³»" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="streamline-plump:contact-phonebook-solid" height="1em" sizing="height"></iconify-icon><!--]-->è”ç³»<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/map.html" aria-label="å¯¼èˆª" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="streamline-plump:world-remix" height="1em" sizing="height"></iconify-icon><!--]-->å¯¼èˆª<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/navyum" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢æ–‡æ¡£"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><iconify-icon class="vp-icon" icon="fluent:apps-32-filled" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">å¸¸ç”¨è½¯ä»¶</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">åˆ†å¸ƒå¼åŸºå»º</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">å®¹å™¨åŒ–</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/%E5%AE%B9%E5%99%A8%E5%8C%96/docker.html" aria-label="docker" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="simple-icons:docker" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->docker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/%E5%AE%B9%E5%99%A8%E5%8C%96/k8s.html" aria-label="k8s" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="lineicons:kubernetes" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->k8s<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/%E5%AE%B9%E5%99%A8%E5%8C%96/minikube.html" aria-label="minikube" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="lineicons:kubernetes" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->minikube<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æ•°æ®åº“</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æ¶ˆæ¯é˜Ÿåˆ—</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/0.%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84.html" aria-label="0.å­¦ä¹ è·¯å¾„" iconsizing="both"><!---->0.å­¦ä¹ è·¯å¾„<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><iconify-icon class="vp-icon" icon="simple-icons:docker" height="1em" sizing="height"></iconify-icon>docker</h1><div class="page-info"><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color3 clickable" role="navigation">å®¹å™¨æŠ€æœ¯</span><!--]--><meta property="articleSection" content="å®¹å™¨æŠ€æœ¯"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8 clickable" role="navigation">Docker</span><!--]--><meta property="keywords" content="Docker"></span><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 3551 å­—</span><meta property="wordCount" content="3551"></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 12 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT12M"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon" name="eye"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="vp-pageview waline-pageview-count" data-path="/%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/%E5%AE%B9%E5%99%A8%E5%8C%96/docker.html" data-page-key="/%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/%E5%AE%B9%E5%99%A8%E5%8C%96/docker.html">...</span></span></div><hr></div><!----><!----><div class="theme-hope-content" vp-content><ul><li>client-server æ¶æ„</li><li><code>docker client</code>ä½¿ç”¨REST APIï¼Œé€šè¿‡UDSæˆ–è€…networkï¼Œä¸<code>dockerd</code>è¿›è¡Œé€šä¿¡ <img src="https://raw.staticdn.net/Navyum/imgbed/main/IMG/a2959a6248c161ea2a84e671c8a5d38d.png" alt="Img" loading="lazy"></li></ul><h2 id="docker-registries" tabindex="-1"><a class="header-anchor" href="#docker-registries"><span>Docker Registries</span></a></h2><ul><li>ç”¨æ¥å­˜å‚¨Docker Images</li><li>é»˜è®¤ä½¿ç”¨Docker Hub Registries</li><li>å¸¸ç”¨çš„registriesï¼š <ul><li><a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub</a></li><li><a href="https://aws.amazon.com/ecr/" target="_blank" rel="noopener noreferrer">ECR</a></li><li><a href="https://cloud.google.com/artifact-registry" target="_blank" rel="noopener noreferrer">GCR</a></li><li><a href="https://azure.microsoft.com/en-in/products/container-registry" target="_blank" rel="noopener noreferrer">ACR</a></li><li>è‡ªå»ºï¼šHarbor, JFrog Artifactory, GitLab Container registry</li></ul></li><li>ç›¸å…³å‘½ä»¤ï¼š<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> search</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IMAGE_NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ä»registiesæŸ¥æ‰¾é•œåƒ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pull</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DOCKER_USERNAME/IMAGE_NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ä»registriesæ‹‰é•œåƒåˆ°æœ¬åœ°</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tag</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> YOUR_DOCKER_USERNAME/IMAGE_NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> YOUR_DOCKER_USERNAME/IMAGE_NAME:1.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> //å°†æœ¬åœ°é•œåƒé‡å‘½å</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> push</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> YOUR_DOCKER_USERNAME/IMAGE_NAME:1.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å°†é•œåƒæ¨é€åˆ°registries</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="docker-objects" tabindex="-1"><a class="header-anchor" href="#docker-objects"><span>Docker Objects</span></a></h2><h3 id="images" tabindex="-1"><a class="header-anchor" href="#images"><span>Images</span></a></h3><ul><li>Docker Imagesæ˜¯ç”¨æ¥åˆ›å»ºdocker containerçš„ä¸€ç»„åªè¯»çš„æŒ‡ä»¤é›†</li><li>Dockerfile é‡Œé¢çš„æ¯ä¸€æ¡æŒ‡ä»¤éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå±‚Layer</li><li>ç‰¹æ€§ï¼š <ul><li>ä¸å¯æ”¹å˜ï¼ˆimmutableï¼‰ï¼šimageåˆ›å»ºååªèƒ½é€šè¿‡æ–°å»ºè¿›è¡Œä¿®æ”¹</li><li>å±‚ï¼ˆlayersï¼‰ï¼šé•œåƒç”±å±‚æ„æˆï¼Œæ¯ä¸€å±‚ä»£è¡¨æ–‡ä»¶ç³»ç»Ÿçš„å˜æ›´</li></ul></li><li>ç›¸å…³å‘½ä»¤ï¼š<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> image</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ls</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç½—åˆ—æœ¬åœ°image</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> image</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> history</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IMAGE_NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŸ¥çœ‹imageä¿®æ”¹è®°å½•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rmi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   IMAGE_NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">             //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> åˆ é™¤image</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tag</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    SOURCE_IMAGE_NAME[:TAG]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TARGET_IMAGE_NAME[:TAG]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç»™æŒ‡å®šimageé‡å‘½åå¹¶æ‰“ä¸ŠTAG</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> inspect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IMAGE_NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŸ¥çœ‹imageè¯¦ç»†ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                       //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŸ¥çœ‹é•œåƒå¤§å°ï¼Œsizeä¸ºå®é™…å ç”¨å¤§å°ï¼Œvirtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sizeä¸ºè™šæ‹Ÿå†…å­˜å ç”¨ï¼Œæœ‰ä¸€ä¸ªç®—ä¸€ä¸ª</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="image-layers" tabindex="-1"><a class="header-anchor" href="#image-layers"><span>Image layers</span></a></h4><ul><li>Imageæ„å»ºæ—¶ï¼Œå¯¹Layeråšäº†ç¼“å­˜å¤„ç†ã€‚ç”±æ­¤å®ç°å¤šä¸ªImageä¹‹é—´å¯¹å·²ç»æ„å»ºçš„å¥½çš„Layerçš„å¤ç”¨ã€‚</li><li>å¦‚ä½•åˆ©ç”¨å¥½Layer Cacheï¼šç¼–å†™dockerfileæ—¶ï¼Œè¦å°½å¯èƒ½è€ƒè™‘layerçš„å±‚çº§å…ˆåå…³ç³»ï¼Œæé«˜å¤ç”¨</li></ul><h3 id="containers" tabindex="-1"><a class="header-anchor" href="#containers"><span>Containers</span></a></h3><ul><li>Docker Containersæ˜¯Docker Imagesçš„å¯è¿è¡Œçš„å®ä¾‹ï¼ˆç±»æ¯”ç±»å’Œå®ä¾‹ï¼‰</li><li>å®¹å™¨æ˜¯è¿è¡Œåœ¨ä¸»æœºä¸Šçš„ä¸€ä¸ªè¿›ç¨‹</li><li>å¯ä»¥å°†containerçš„çŠ¶æ€æ‰“åŒ…åˆ°ä¸€ä¸ªæ–°çš„Imageä¸­</li><li>ç‰¹æ€§ï¼š <ul><li>è‡ªç»™è‡ªè¶³ï¼ˆSelf-containedï¼‰ï¼šä¸ä¾èµ–äºä¸»æœºï¼Œè‡ªèº«æ‹¥æœ‰ä¸€åˆ‡æ‰€éœ€</li><li>éš”ç¦»æ€§ï¼ˆIsolatedï¼‰ï¼šå®¹å™¨éš”ç¦»è¿è¡Œï¼Œç›¸äº’ä¹‹é—´å‡ ä¹æ²¡æœ‰å½±å“</li><li>ç‹¬ç«‹æ€§ï¼ˆIndependentï¼‰ï¼šæ¯ä¸ªå®¹å™¨å¯ä»¥ç‹¬ç«‹ç®¡ç†ï¼Œä¸å½±å“å…¶ä»–å®¹å™¨</li><li>å¯ç§»æ¤æ€§ï¼ˆPortableï¼‰ï¼šå®¹å™¨å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¿è¡Œ</li></ul></li><li>ç›¸å…³å‘½ä»¤ï¼š<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     --name=app-container</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IMAGE_NAME</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [COMMAND] [ARG...]   //æ–°å»ºcontainerï¼Œå¹¶ä»¥äº¤äº’å½¢å¼è¿è¡Œ COMMAND ARGã€‚-iå³--interactive -tå³--ttyï¼Œitä¸€èˆ¬æ­é… sh ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    CONTAINER_ID</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [COMMAND] [ARG...]                         //å¯¹è¿è¡Œä¸­çš„containeræ‰§è¡Œå‘½ä»¤</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -it</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> testcentos</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  sh</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;echo &quot;xxx&quot; &gt;&gt; /data/a&#39;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      CONTAINER_ID</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> inspect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CONTAINER_ID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŸ¥çœ‹containerè¯¦ç»†ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> commit</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;message&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;CMD node app.js&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">å®¹å™¨I</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">D&gt; &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">æ–°é•œåƒå</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ç§°&gt;  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">//å°†å®¹å™¨IDä¿å­˜ä¸ºæ–°é•œåƒï¼Œå¹¶è®¾ç½®é»˜è®¤CMDä¸ºnode</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> app.jsã€‚ä¸æ¨èï¼Œæ¨èä½¿ç”¨dockerfile</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 100M</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --oom-kill-disable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ubuntu:22.04</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin/bash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å…³é—­OOM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> killeræ—¶ï¼Œå¿…é¡»è¦é™åˆ¶å†…å­˜ä½¿ç”¨ï¼Œå¦åˆ™ä¼šå¯¼è‡´hostå†…å­˜è€—å°½</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>å…¶ä»–å‚æ•°flagï¼š <ul><li>--entrypoint è¦†ç›–Dockerfile ENTRYPOINTæŒ‡ä»¤</li><li>--publish / -p æš´éœ²æŒ‡å®šipå’Œç«¯å£</li><li>--env / -e è®¾ç½®å®¹å™¨ç¯å¢ƒå˜é‡</li><li>--user / -u è®¾ç½®å®¹å™¨å†…ç¬¬ä¸€ä¸ªè¿›ç¨‹çš„è¿è¡Œç”¨æˆ·ï¼Œé»˜è®¤ä¸ºroot</li><li>--workdir /-w è®¾ç½®å®¹å™¨å†…ï¼Œç¨‹åºè¿è¡Œçš„å·¥ä½œç›®å½•</li><li>--memory-xx /-m è®¾ç½®å®¹å™¨å†…å­˜ä½¿ç”¨ç›¸å…³å‚æ•°ï¼Œç”¨äºæ€§èƒ½è°ƒä¼˜</li><li>--cpu-xx /-c è®¾ç½®å®¹å™¨CPUä½¿ç”¨ç›¸å…³å‚æ•°ï¼Œç”¨äºæ€§èƒ½è°ƒä¼˜</li><li>--gpus è®¾ç½®å®¹å™¨å¯ä½¿ç”¨çš„GPU</li><li>--restart è®¾ç½®å®¹å™¨è‡ªåŠ¨é‡å¯ç­–ç•¥</li></ul></li></ul><h3 id="volumes-bind-mounts-tmpfs" tabindex="-1"><a class="header-anchor" href="#volumes-bind-mounts-tmpfs"><span>Volumes/bind mounts/tmpfs</span></a></h3><ul><li>ä½œç”¨ï¼šå°†å®¹å™¨ä¸­çš„æ•°æ®æŒä¹…åŒ–ï¼Œvolumesä¸ä¼šéšç€containeré”€æ¯è€Œæ¶ˆå¤±</li><li>å›¾è§£ï¼š <img src="https://raw.staticdn.net/Navyum/imgbed/pic/IMG/385b08ca5b077a3bf9bced726581755b.png" alt="Img" loading="lazy"></li><li>å·®å¼‚å¯¹æ¯”ï¼š |æ–¹å¼|ç®¡ç†æ–¹å¼ä¸­æ–‡å|ç›®å½•ä½ç½®|æ•°æ®éš”ç¦»|ä½¿ç”¨åœºæ™¯| |:----|:----|:----|:----|:----| |Bind Mount|hostç®¡ç†|è‡ªå®šä¹‰ç£ç›˜ä½ç½®ï¼Œä¾èµ–hostæ–‡ä»¶ç³»ç»Ÿ|å®¹å™¨å’Œä¸»æœºå…±äº«|éœ€è¦ç›´æ¥è®¿é—®ä¸»æœºæ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œå…±äº«ä»£ç ã€å…±äº«ä¸»æœºé…ç½®| |Volume|dockerç®¡ç†|/var/lib/docker/volumes/&lt;volume-name&gt;|å®¹å™¨å’Œä¸»æœºé€šè¿‡Dockerå­˜å‚¨é©±åŠ¨è¿›è¡Œäº¤äº’|éœ€è¦æ•°æ®æŒä¹…åŒ–ã€å¤šå®¹å™¨é—´å…±äº«æ•°æ®æ—¶ã€äº‘å­˜å‚¨ã€è¿œç¨‹å­˜å‚¨ï¼ŒIOè¦æ±‚é«˜ï¼Œvolumeså­˜å‚¨åœ¨Linux VMä¸­ï¼Œè€Œä¸æ˜¯ä¸»æœº| |tmpfs|dockerç®¡ç†|å­˜å‚¨åœ¨ä¸»æœºå†…å­˜ä¸­|éš”ç¦»æ€§å¥½ï¼Œå¤šå®¹å™¨ä¹‹é—´ä¸å…±äº«|ä¸æƒ³æ•°æ®è¢«æŒä¹…åŒ–æ—¶ï¼Œå­˜å‚¨å¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯|</li><li>ç›¸å…³å‘½ä»¤ï¼š<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> volume</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> VOLUME_NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> //åˆ›å»ºå·</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> volume</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> prune</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> VOLUME_NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> åˆ é™¤å·</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> VOLUME_NAME:/path/in/container</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IMAGE_NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  //</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æ–¹å¼æŒ‚è½½</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --mount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> type=volume,source=VOLUME_NAME,target=/path/in/container</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IMAGE_NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‚è½½</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> volume</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --mount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> type=bind,source=/path/on/host,target=/path/in/container</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IMAGE_NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bind</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mount</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --mount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> type=tmpfs,target=/path/in/container</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IMAGE_NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tmpfs</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> inspect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CONTAINER_ID</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --format</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;{{ json .Mounts }}&#39;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> inspect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> VOLUME_NAME</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">//</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å…¶ä¸­</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å¯ä»¥ç®€å†™ä¸º</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> src</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">//</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å…¶ä¸­</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> target</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å¯ä»¥ç”¨</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> destination</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æˆ–è€…</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dst</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ä»£æ›¿</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">//</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v/--volume</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å’Œ</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --mountçš„ä¸€ä¸ªåŒºåˆ«ï¼Œå‰è€…å¦‚æœhostå¯¹åº”æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºï¼Œåè€…ä¼šæŠ¥é”™</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="storage-driver" tabindex="-1"><a class="header-anchor" href="#storage-driver"><span>Storage Driver</span></a></h4><ul><li>ä½œç”¨ï¼šå­˜å‚¨æœ¬åœ°é•œåƒã€Layerå’Œå¯¹åº”cache</li><li>è·¯å¾„ï¼š/var/lib/docker/&lt;storage-driver&gt;ï¼Œæ­¤å¤„storage-driveré€šå¸¸ä¸ºoverlay2</li><li>å¸¸è§çš„storage driver <ul><li>overlay2ã€fuse-overlayfsã€btrfs/zfsã€vfs</li></ul></li></ul><h3 id="networks" tabindex="-1"><a class="header-anchor" href="#networks"><span>Networks</span></a></h3><ul><li>ä½œç”¨ï¼šç”¨äºå®¹å™¨ä¹‹é—´ã€å®¹å™¨å¤–éƒ¨çš„é€šä¿¡ï¼ˆcommunicateï¼‰</li><li>ç½‘ç»œé©±åŠ¨æ¯”è¾ƒ |é©±åŠ¨|è¯´æ˜|ä½¿ç”¨åœºæ™¯| |:----|:----|:----| |bridge|æ¡¥æ¥ç½‘ç»œï¼Œç›¸åŒä¸»æœºçš„åŒç½‘ç»œå®¹å™¨ä¹‹é—´è¿›è¡Œé€šä¿¡ï¼Œä¸åŒç½‘ç»œå®¹å™¨è¿›è¡Œéš”ç¦»|é»˜è®¤çš„ç½‘ç»œé©±åŠ¨ï¼Œç”Ÿäº§ç¯å¢ƒä¸å»ºè®®ä½¿ç”¨é»˜è®¤çš„bridgeï¼Œå¯ä»¥ç”¨æˆ·è‡ªå·±åˆ›å»ºbridgeç½‘ç»œ| |host|ç›´æ¥ä½¿ç”¨hostçš„ç½‘ç»œï¼Œhostå’Œå®¹å™¨æ— ç½‘ç»œéš”ç¦»|ä½¿ç”¨hostçš„namespaceã€å®¹å™¨ä¸ä¼šè¢«åˆ†é…IPï¼Œé«˜æ€§èƒ½åœºæ™¯ï¼Œä»…åœ¨linuxå®¹å™¨ä¸‹æ”¯æŒ| |none|å®Œå…¨å’Œå…¶ä»–å®¹å™¨ã€ä¸»æœºéš”ç¦»|æ— ç½‘ç»œé€šä¿¡çš„åœºæ™¯| |overlay|è¿æ¥å¤šä¸ªdockerå®ˆæŠ¤è¿›ç¨‹|ä¸»è¦ç”¨äºSwarm servicesã€æˆ–è€…å¤šä¸ªdocÂ´ker hostçš„ç‹¬ç«‹å®¹å™¨é€šä¿¡ï¼›å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ç®¡ç†hostçš„ç½‘ç»œå®ç°serviceé€šä¿¡| |ipvlan|ç”±ç”¨æˆ·è‡ªä¸»æ§åˆ¶å®¹å™¨IP|æä¾›å¯¹ipv4ã€ipv6çš„å®Œå…¨æ§åˆ¶| |macvlan|ç”±ç”¨æˆ·è‡ªä¸»æ§åˆ¶å®¹å™¨MACåœ°å€|ç»™å®¹å™¨åˆ†é…MACåœ°å€|</li></ul><table><thead><tr><th style="text-align:left;">æ¡¥æ¥æ¨¡å¼</th><th style="text-align:left;">é»˜è®¤bridge</th><th style="text-align:left;">ç”¨æˆ·è‡ªå®šä¹‰bridge</th></tr></thead><tbody><tr><td style="text-align:left;">DNSè®¾ç½®</td><td style="text-align:left;">åªèƒ½é€šè¿‡IPè®¿é—®</td><td style="text-align:left;">IP æˆ–è€… Name</td></tr><tr><td style="text-align:left;">ç«¯å£å¼€æ”¾</td><td style="text-align:left;">å®¹å™¨å¿…é¡»æŒ‡å®šå¼€æ”¾ç«¯å£ï¼Œå…¶ä»–å®¹å™¨æ‰èƒ½è®¿é—®</td><td style="text-align:left;">æ‰€æœ‰å®¹å™¨çš„ç«¯å£é»˜è®¤å¼€æ”¾</td></tr><tr><td style="text-align:left;">éš”ç¦»æ€§</td><td style="text-align:left;">å®¹å™¨åœ¨ä¸æŒ‡å®šæ—¶é»˜è®¤ä½¿ç”¨bridgeï¼Œå­˜åœ¨é£é™©</td><td style="text-align:left;">éœ€è¦æ˜ç¡®æŒ‡å®šå¯¹åº”bridgeåç§°</td></tr><tr><td style="text-align:left;">çƒ­æ’æ‹”</td><td style="text-align:left;">ä½¿ç”¨é»˜è®¤bridgeçš„å®¹å™¨éœ€è¦åœæ­¢æ‰èƒ½åŠ å…¥æ–°ç½‘ç»œ</td><td style="text-align:left;">å¯ä»¥ç›´æ¥åŠ å…¥æˆ–è€…æ–­å¼€å¯¹åº”è‡ªå®šä¹‰ç½‘ç»œ</td></tr><tr><td style="text-align:left;">çµæ´»æ€§</td><td style="text-align:left;">æ‰€æœ‰å®¹å™¨ä½¿ç”¨ç›¸åŒçš„ç½‘ç»œé…ç½®ï¼Œä¾‹å¦‚é˜²ç«å¢™ç­‰é…ç½®ä¿®æ”¹ä¸æ–¹ä¾¿</td><td style="text-align:left;">å¯ä»¥è‡ªå®šä¹‰å¤šä¸ªç”¨æˆ·ç½‘ç»œï¼Œé…ç½®ç‹¬ç«‹</td></tr><tr><td style="text-align:left;">ç¯å¢ƒå˜é‡å…±äº«</td><td style="text-align:left;">ä½¿ç”¨--link flagå…±äº«</td><td style="text-align:left;">å¯ä»¥é€‰æ‹© volumeã€compose fileã€swarm services</td></tr></tbody></table><ul><li>ç›¸å…³å‘½ä»¤ï¼š</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bridge</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> my-net</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> åˆ›å»ºmy-netç½‘ç»œ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  my-net</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                                 //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> åˆ é™¤my-netç½‘ç»œ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> overlay</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --attachable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> my-overlay</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   //</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --attachable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å®ç°éswarm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> serviceçš„è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --network=my-net</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -itd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --name=container3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  busybox</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç›´æ¥ä½¿ç”¨my-netç½‘ç»œè¿è¡Œå®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> my-net</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> my-container</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                 //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å°†å®¹å™¨è¿æ¥åˆ°my-netç½‘ç»œ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> disconnect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> my-net</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> my-container</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å°†å®¹å™¨ä»my-netç½‘ç»œæ–­å¼€</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> inspect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> NETWORK_NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                                //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŸ¥çœ‹NETWORK_NAMEç½‘ç»œä¿¡æ¯</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="plugins" tabindex="-1"><a class="header-anchor" href="#plugins"><span>Plugins</span></a></h3><ul><li>ç”¨æ¥æ‰©å±•dockeråŠŸèƒ½</li><li>å¸¸ç”¨çš„Pluginsåˆ†ç±»ï¼š <ul><li>Network plugins æ–¹ä¾¿ç½‘ç»œç®¡ç†</li><li>Volume plugins å®ç°å·çš„äº‘å­˜å‚¨</li><li>Authorization plugins æƒé™ç®¡ç†</li><li>Logging plugins æ—¥å¿—ç®¡ç†</li></ul></li><li>å¸¸ç”¨å‘½ä»¤ï¼š</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> plugin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PLUGIN_NAME</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> plugin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ls</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> plugin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enable</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> plugin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å…¶ä»–å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å…¶ä»–å‘½ä»¤"><span>å…¶ä»–å‘½ä»¤ï¼š</span></a></h3><h4 id="inspect-ä¿¡æ¯æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#inspect-ä¿¡æ¯æ£€æŸ¥"><span>inspect ä¿¡æ¯æ£€æŸ¥</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> inspect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> centos-8</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --format</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;{{ json .MacAddress }}&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="stats-å®¹å™¨è¿è¡Œæ—¶metricsè·å–" tabindex="-1"><a class="header-anchor" href="#stats-å®¹å™¨è¿è¡Œæ—¶metricsè·å–"><span>stats å®¹å™¨è¿è¡Œæ—¶metricsè·å–</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stats</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CONTAINER_NAME</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="æ ¼å¼åŒ–è¾“å‡º-filter-å’Œ-format" tabindex="-1"><a class="header-anchor" href="#æ ¼å¼åŒ–è¾“å‡º-filter-å’Œ-format"><span>æ ¼å¼åŒ–è¾“å‡º --filter å’Œ --format</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> COMMAND</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --filter</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;KEY=VALUE&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  //è¿‡æ»¤ç»“æœä»…å±•ç¤ºkey</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> inspect</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --format</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;{{join .Args &quot; , &quot;}}&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="build-é•œåƒ" tabindex="-1"><a class="header-anchor" href="#build-é•œåƒ"><span>Build é•œåƒ</span></a></h2><ul><li>client-serveræ¶æ„å›¾ï¼š <img src="https://raw.staticdn.net/Navyum/imgbed/pic/IMG/83843a52e15b6b08952df8a8999ce5e3.png" alt="Img" loading="lazy"></li></ul><h3 id="ä¼ ç»Ÿbuild-vs-buildx" tabindex="-1"><a class="header-anchor" href="#ä¼ ç»Ÿbuild-vs-buildx"><span>ä¼ ç»Ÿbuild VS buildx</span></a></h3><ul><li>docker build æ˜¯ Docker çš„æ ‡å‡†æ„å»ºå‘½ä»¤</li><li>âœ… docker buildx build æ˜¯ä½¿ç”¨<code>docker buildkit</code>è¿›è¡Œæ„å»ºï¼Œæ”¯æŒå¤šå¹³å°æ„å»ºã€å¹¶è¡Œæ„å»ºï¼Œæ˜¯ä¸‹ä¸€ä»£æ„å»ºå·¥å…·</li></ul><h3 id="buildxæ„å»ºè¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#buildxæ„å»ºè¿‡ç¨‹"><span>buildxæ„å»ºè¿‡ç¨‹ï¼š</span></a></h3><ol><li>åˆ›å»ºbuilderï¼š<code>$ docker buildx create --name=BUILDR --driver=DRIVER ... </code><ul><li>driverç±»å‹é€‰æ‹©ï¼šdockerã€docker-containerã€kubernetesã€remote<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># docker driverï¼šé»˜è®¤çš„driverï¼Œä¸éœ€è¦å‚æ•°æŒ‡å®š</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker buildx build </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">registry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> . `</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç›´æ¥build</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># docker-container driverï¼šæ³¨æ„æœ«å°¾çš„ containerï¼Œä½¿ç”¨containerè¿›è¡Œæ„å»º</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker buildx create </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">--name=BUILDR</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --driver=docker-container</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --driver-opt=[key</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">value,...]</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --use</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --bootstrap</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> BUILDR `</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># kubernetes driverï¼šä½¿ç”¨k8sè¿›è¡Œæ„å»º</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker buildx create </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">--name=BUILDR</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --driver=kubernetes</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --driver-opt=[key</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">value,...]</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --use</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># remote driverï¼šä½¿ç”¨è¿œç¨‹driverè¿›è¡Œæ„å»º</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker buildx create </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">--name=BUILDR</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --driver=remote</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --use</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tcp://localhost:1234 `</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li>ä½¿ç”¨builderæ„å»ºï¼š<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># platform æŒ‡å®šå¹³å°æ¶æ„ï¼Œ.ä»å½“å‰ç›®å½•æ‰¾dockerfile</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> buildx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> build</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --builder=container</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --platform=linux/amd64,linux/arm64</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">registr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">y&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">imag</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="dockerfile" tabindex="-1"><a class="header-anchor" href="#dockerfile"><span>Dockerfileï¼š</span></a></h3><h4 id="è¯­æ³•ç›¸å…³-syntax" tabindex="-1"><a class="header-anchor" href="#è¯­æ³•ç›¸å…³-syntax"><span>è¯­æ³•ç›¸å…³ syntax</span></a></h4><ul><li>è¯­æ³•è§£æå™¨æŒ‡ä»¤ï¼Œå¿…é¡»ä½äºdockerfileç¬¬ä¸€è¡Œ</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># syntax=docker/dockerfile:1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>è½¬ä¹‰é—®é¢˜ï¼šwindosä¸‹æ–‡ä»¶è·¯å¾„åæ–œæ é—®é¢˜</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># escape=`</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="å‘½ä»¤-å‚è€ƒ" tabindex="-1"><a class="header-anchor" href="#å‘½ä»¤-å‚è€ƒ"><span>å‘½ä»¤ï¼š<a href="https://docs.docker.com/reference/dockerfile/" target="_blank" rel="noopener noreferrer">å‚è€ƒ</a></span></a></h4><ul><li><p>FROM</p><ul><li>åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„æ„å»ºé˜¶æ®µï¼ˆbuild stageï¼‰ï¼Œå¹¶ä¸ºåç»­æŒ‡ä»¤æä¾›åŸºç¡€é•œåƒ</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [--platform=&lt;platform&gt;] &lt;image&gt;[:&lt;tag&gt;] [</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;name&gt;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>WORKDIR</p><ul><li>ç»™RUN, CMD, ENTRYPOINT, COPY ,ADD è®¾ç½®å·¥ä½œç›®å½•</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WORKDIR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> path</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>æ³¨æ„äº‹é¡¹ï¼š <ul><li>WORKDIRå¯ä»¥é‡å¤å¤šæ¬¡ï¼Œç¬¬ä¸€æ¬¡å¿…é¡»è¦ç»å¯¹è·¯å¾„</li><li>å¦‚æœåç»­çš„WORKDIRæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œé‚£ä¹ˆå®ƒåˆ™æ˜¯ç›¸å¯¹äºä¸Šæ¬¡çš„WORKDIRçš„å€¼</li></ul></li></ul></li><li><p>ARG</p><ul><li>å®šä¹‰ç”¨æˆ·buildæ„å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨çš„å˜é‡ï¼Œä¸ä¼šè¢«æŒä¹…åŒ–åˆ°é•œåƒä¸­ã€‚</li><li><code>docker build</code> æ—¶é€šè¿‡ <code>--build-arg &lt;name&gt;=&lt;value&gt;</code> ä¼ å…¥å€¼æˆ–è€…è¦†ç›–é»˜è®¤å€¼</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ARG</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;name&gt;[=&lt;default value&gt;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>æ³¨æ„äº‹é¡¹ï¼š <ul><li>å˜é‡çš„ä½œç”¨åŸŸ</li><li>dockerä¸­æœ‰å¤§é‡é¢„ç½®çš„å˜é‡ï¼Œå…¨å±€å˜é‡</li></ul></li></ul></li><li><p>ENV</p><ul><li>å®šä¹‰é•œåƒå†…éƒ¨åç»­ä½¿ç”¨æ—¶éœ€è¦çš„ç¯å¢ƒå˜é‡ï¼Œä¼šè¢«æŒä¹…åŒ–åˆ°é•œåƒä¸­ã€‚</li><li><code>docker run</code> æ—¶ï¼Œé€šè¿‡ <code>--env &lt;key&gt;=&lt;value&gt;</code> ä¼ å…¥å€¼æˆ–è€…è¦†ç›–é»˜è®¤å€¼</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ENV</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;key&gt;=&lt;value&gt; ... # æ”¯æŒä¸€æ¬¡å®šä¹‰å¤šä¸ª</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>æ³¨æ„äº‹é¡¹ï¼š <ul><li>å¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯ä¸è¦é€šè¿‡ENVä¼ å…¥ï¼Œæ¨èä½¿ç”¨ <code>RUN --mount=type=secret</code></li></ul></li></ul></li><li><p>ADD</p><ul><li>ä»srcæ‹·è´æ•°æ®åˆ°é•œåƒä¸­çš„dstè·¯å¾„</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ADD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [OPTIONS] &lt;src&gt; ... &lt;dst&gt;          # ä¸æ”¯æŒå¸¦ç©ºæ ¼çš„è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ADD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [OPTIONS] [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&lt;src&gt;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, ... </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&lt;dst&gt;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]   # æ”¯æŒå¸¦ç©ºæ ¼çš„è·¯å¾„</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ³¨æ„äº‹é¡¹ï¼š <ul><li>æ”¯æŒä¸€æ¬¡æ‹·è´å¤šä¸ªsrcåˆ°dstï¼Œæ­¤æ—¶æœ€åä¸€ä¸ªä½ç½®ä¸ºdstï¼Œå¹¶ä¸”å¿…é¡»æ˜¯ç›®å½•ï¼ˆå‚è€ƒcpå‘½ä»¤ï¼‰</li><li>å¦‚æœdstä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»º</li><li>dstå¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œæœ«å°¾ä¸€å®šè¦åŠ &quot;/&quot;</li><li>ADDå‘½ä»¤ä¼šè‡ªåŠ¨åˆ¤æ–­srcçš„ç±»å‹ <ul><li>file/directoryï¼šç›´æ¥å®Œæ•´æ‹·è´åˆ°dst</li><li>tarå‹ç¼©åŒ…ï¼šè§£å‹åæ‹·è´åˆ°dst</li><li>urlï¼šä¸‹è½½urlå†…å®¹åæ‹·è´åˆ°dst</li><li>gitä»“åº“ï¼šä»“åº“è¢«å…‹éš†åˆ°dst</li></ul></li></ul></li></ul></li><li><p>COPY</p><ul><li>ä»srcæ‹·è´æ•°æ®åˆ°é•œåƒä¸­çš„dstè·¯å¾„</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">COPY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [OPTIONS] &lt;src&gt; ... &lt;dst&gt;          # ä¸æ”¯æŒå¸¦ç©ºæ ¼çš„è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">COPY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [OPTIONS] [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&lt;src&gt;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, ... </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&lt;dst&gt;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]   # æ”¯æŒå¸¦ç©ºæ ¼çš„è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">COPY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [--from=&lt;image|stage|context&gt;] &lt;src&gt; ... &lt;dest&gt;  # é‡è¦â€¼ï¸ ä»é•œåƒã€é˜¶æ®µã€ä¸Šä¸‹æ–‡æ‹·è´æ•°æ®</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ³¨æ„äº‹é¡¹ï¼š <ul><li>COPY å‘½ä»¤ä¸»è¦ç”¨äºï¼š <ul><li>build context ç”¨æ³•åŒADD</li><li>build stage æ„å»ºé˜¶æ®µ <code>COPY --from=build /myapp /usr/bin/</code> //å°†buildé˜¶æ®µç”Ÿæˆçš„/myapp æ‹·è´åˆ°å½“å‰é˜¶æ®µ</li><li>named context ä»è‡ªå®šä¹‰ä¸Šä¸‹æ–‡æ‹·è´</li><li>image ä»é•œåƒæ‹·è´æ•°æ®</li></ul></li><li>ä½¿ç”¨COPY --from æ—¶ï¼Œè·¯å¾„å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„</li></ul></li></ul></li><li><p><strong>CMD</strong></p><ul><li>å®¹å™¨å¯åŠ¨æ—¶ï¼Œå®šä¹‰é»˜è®¤å‚æ•°å’Œé€‰é¡¹ï¼›é•œåƒæ„å»ºæ—¶ä¸ä¼šèµ·ä»»ä½•ä½œç”¨</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># shell formï¼š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">CMD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> command param1 param2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># exec formï¼š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">CMD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;executable&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;param1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;param2&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># exec formï¼š ä½œä¸ºENTRYPOINTçš„é»˜è®¤å‚æ•°ä½¿ç”¨ï¼Œæ­¤æ—¶å¿…é¡»æ­é…ENTRYPOINTä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">CMD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;param1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;param2&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ³¨æ„äº‹é¡¹ï¼š <ul><li>CMDåªèƒ½æœ‰ä¸€ä¸ªï¼›å¦‚æœæœ‰å¤šä¸ªï¼Œåˆ™åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆ</li><li>æ¨èç”¨æ³• exec formå½¢å¼ä½œä¸ºENTRYPOINT é»˜è®¤å‚æ•°</li><li>shell æ¨¡å¼ï¼Œé»˜è®¤ä½¿ç”¨shellï¼Œå­˜åœ¨å­—ç¬¦ä¸²ä¿®æ”¹é—®é¢˜ï¼Œä¾‹å¦‚è½¬ä¹‰ã€ç©ºæ ¼ç­‰</li><li>exec æ¨¡å¼ï¼Œå¯ä»¥è‡ªå·±å®šä¹‰ç¨‹åºï¼Œå¯¹å­—ç¬¦ä¸²å‚æ•°å¤„ç†è¾ƒå¥½ï¼Œä»éœ€è¦å¤„ç†å¥½è½¬ä¹‰é—®é¢˜</li></ul></li></ul></li><li><p><strong>ENTRYPOINT</strong></p><ul><li>å®¹å™¨å¯åŠ¨æ—¶ï¼Œå®šä¹‰å¯åŠ¨å‘½ä»¤ï¼›é•œåƒæ„å»ºè¿‡ç¨‹ä¸­ä¸ä¼šèµ·ä»»ä½•ä½œç”¨ã€‚ï¼ˆå¤šé˜¶æ®µæ„å»ºä¸­å¯ä»¥æœ‰å¤šä¸ªENTRYPOINTï¼‰</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># shell formï¼š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ENTRYPOINT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> command param1 param2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># exec formï¼š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ENTRYPOINT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;executable&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;param1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;param2&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ³¨æ„äº‹é¡¹ï¼š <ul><li>é€šè¿‡docker run --entrypoint å¯ä»¥è¦†ç›–é•œåƒä¸­çš„ENTRYPOINT</li><li>å¦‚æœä½¿ç”¨shellæ¨¡å¼çš„ ENTRYPOINT <ul><li>åˆ™CMDä¼šå…¨éƒ¨å¤±æ•ˆï¼ŒåŒ…æ‹¬runå¯¹åº”çš„å‘½ä»¤è¡Œå‚æ•°ï¼›</li><li>å¹¶ä¸”ä¼šå…ˆå¯åŠ¨shellä½œä¸º1å·è¿›ç¨‹ï¼Œç„¶ååœ¨shellç¯å¢ƒä¸‹æ‰§è¡Œå¯¹åº”å‘½ä»¤</li><li>docker stop ä¸å¤Ÿä¼˜é›…ï¼Œdockerå†…çš„ç¨‹åºå¹¶ä¸èƒ½åŸºäºå¤–éƒ¨çš„é€€å‡ºä¿¡å·ä¼˜é›…é€€å‡º</li></ul></li></ul></li><li><code>CMD å’Œ ENTRYPOINTçš„ç»„åˆ</code>ï¼š <img src="https://raw.staticdn.net/Navyum/imgbed/pic/IMG/832031b8fb17ede21a4e43cd2b00fdd0.png" alt="Img" loading="lazy"></li></ul></li><li><p><strong>RUN</strong></p><ul><li>é€šè¿‡æ‰§è¡Œå‘½ä»¤ï¼Œè§£å†³é•œåƒæ„å»ºè¿‡ç¨‹ä¸­çš„ä¾èµ–</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Shell form:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [OPTIONS] &lt;command&gt; ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Exec form:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [OPTIONS] [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&lt;command&gt;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, ... ]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ³¨æ„äº‹é¡¹ï¼š <ul><li>æ¯ä¸€ä¸ªRUNéƒ½ä¼šç”Ÿæˆé•œåƒçš„ä¸€å±‚Layer</li><li>RUN çš„ OPTIONSæœ‰ä¸‰ä¸ªï¼š <ul><li>--mount buildè¿‡ç¨‹ä¸­éœ€è¦è®¿é—®çš„æŒ‚è½½ç‚¹</li><li>--network buildè¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨çš„ç½‘ç»œ</li><li>--security ç¨³å®šç‰ˆå°šæœªæä¾›</li></ul></li></ul></li></ul></li><li><p>EXPOSE</p><ul><li>å®šä¹‰ç”±è¯¥IMAGEç”Ÿæˆçš„CONTAINERï¼Œåœ¨è¿è¡Œæ—¶çš„ç›‘å¬ç«¯å£å’Œåè®®</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">EXPOSE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;port&gt; [&lt;port&gt;/&lt;protocol&gt;...]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>æ³¨æ„äº‹é¡¹ï¼š <ul><li>EXPOSEéœ€è¦æ­é… -p ä½¿ç”¨ï¼ŒEXPOSEåªå®šä¹‰äº†å®¹å™¨å†…éƒ¨çš„å¯ç”¨ç«¯å£ï¼Œå¹¶æ²¡æœ‰åšå¤–éƒ¨çš„ç«¯å£æ˜ å°„å¹¶æš´éœ²å‡ºå»ã€‚</li></ul></li></ul></li><li><p>VOLUME</p><ul><li>å°†é•œåƒä¸­çš„æŸä¸ªç›®å½•å˜æˆå·</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> mkdir /data</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">VOLUME</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/data&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>USER</p><ul><li>ç»™RUN, CMD, ENTRYPOINT è®¾ç½®æ‰§è¡Œè€…</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">USER</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;user&gt;[:&lt;group&gt;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>LABEL</p><ul><li>ç»™é•œåƒæ·»åŠ å…ƒæ•°æ®metadataï¼Œä¾‹å¦‚ç»´æŠ¤è€…ä¿¡æ¯ã€ç‰ˆæœ¬å·ã€é•œåƒæè¿°ç­‰</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">LABEL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;key&gt;=&lt;value&gt;  ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>SHELL</p><ul><li>ä¿®æ”¹é»˜è®¤shellä»/bin/sh æ”¹ä¸ºæŒ‡å®šshellï¼Œwindowsä¸‹å¸¸ç”¨ã€‚ä¾‹å¦‚æ”¹ä¸ºpowershellå’Œcmd</li><li>ä¸€èˆ¬ç”¨äº RUN æŒ‡ä»¤çš„shellæ¨¡å¼ä¸‹</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SHELL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;executable&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;parameters&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>HEALTHCHECK</p><ul><li>ç”¨äºæ£€æŸ¥containerè¿è¡Œæ˜¯å¦å¥åº·ï¼Œé€šè¿‡åœ¨å®¹å™¨å†…è¿è¡ŒCMD æ£€æŸ¥å‘½ä»¤</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">HEALTHCHECK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [OPTIONS] CMD command</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h4 id="å¤šé˜¶æ®µæ„å»º" tabindex="-1"><a class="header-anchor" href="#å¤šé˜¶æ®µæ„å»º"><span>å¤šé˜¶æ®µæ„å»º</span></a></h4><ul><li>ä½œç”¨ï¼š <ul><li>é€šè¿‡ docker build --target=&lt;stage_name&gt;ï¼Œç”¨åŒä¸€ä¸ªdockerfileï¼Œæ„å»ºæŸé˜¶æ®µçš„é•œåƒ</li><li>é€šè¿‡ FROM scratchï¼Œåˆ©ç”¨é˜¶æ®µç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé™ä½æœ€ç»ˆé•œåƒå¤§å°</li><li>buildxé€šè¿‡buildkitæ„å»ºæ—¶ï¼Œåªæ„å»ºä¾èµ–çš„é˜¶æ®µï¼›ä¼ ç»Ÿbuildä¼šæ„å»ºæ‰€æœ‰é˜¶æ®µï¼›</li></ul></li><li>ä½¿ç”¨ï¼š <ul><li>ç»™stageå®šä¹‰åˆ«åï¼š FROM &lt;base_image&gt;:&lt;tag&gt; AS &lt;name&gt;</li><li>é€šè¿‡COPYä½¿ç”¨å¤–éƒ¨é•œåƒçš„æ–‡ä»¶ COPY --from=nginx:latest /etc/nginx/nginx.conf /nginx.conf</li><li>é€šè¿‡COPYä½¿ç”¨å‰é¢é˜¶æ®µçš„æ–‡ä»¶ COPY --from=pre_stage result /src</li><li>æ„å»ºæŒ‡å®šçš„é˜¶æ®µï¼šdocker build -t IMAGE_NAME --target=stage_name . // ä»dockerfileæ„å»ºstage_nameå¯¹åº”é˜¶æ®µåšä¸ºIMAGE_NAMEé•œåƒ</li></ul></li><li>ä¾‹å­ï¼š<div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># syntax=docker/dockerfile:1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> golang:1.21-alpine </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> base</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WORKDIR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /src</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">COPY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> go.mod go.sum /src/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> go mod download</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">COPY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> . .</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># build client</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> base </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> build-client</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> go build -o /bin/client ./cmd/client</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># build server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> base </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> build-server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> go build -o /bin/server ./cmd/server</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># copy client binary to client image</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scratch </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> client</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">COPY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --from=build-client /bin/client /bin/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ENTRYPOINT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/bin/client&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># copy server binary to server image</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scratch </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">COPY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --from=build-server /bin/server /bin/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ENTRYPOINT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/bin/server&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/6/23 10:51:59</span></div><!----></div></footer><nav class="vp-page-nav"><!----><a class="route-link auto-link next" href="/%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/%E5%AE%B9%E5%99%A8%E5%8C%96/k8s.html" aria-label="k8s" iconsizing="both"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">k8s<iconify-icon class="vp-icon" icon="lineicons:kubernetes" height="1em" sizing="height"></iconify-icon></div></a></nav><div id="comment" class="waline-wrapper vp-comment" vp-comment darkmode="false" style="display:block;"><!----></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><!----><div class="vp-copyright">
  ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½ - éå•†ç”¨ - éè¡ç”Ÿ - ä¿æŒç½²å<a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh-hans" target="_blank" rel="noopener noreferrer">ï¼ˆåˆ›æ„å…±äº« 4.0 è®¸å¯è¯ï¼‰</a>|
  Copyright Â© 2024-present Navyum</a>
  </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script src="/assets/js/runtime~app.4343b326.js" defer></script><script src="/assets/js/1181.88d0b359.js" defer></script><script src="/assets/js/app.0aa5305f.js" defer></script>
    <!-- çœ‹æ¿å¨˜åŒºå— -->
    <script src="/live2d-widget/autoload.js"></script>
    <!-- End çœ‹æ¿å¨˜åŒºå— -->

    <!-- ahrefsåˆ†æ-->
    <script src="https://analytics.ahrefs.com/analytics.js" data-key="7WraP4W+AhiZ1hvRy398kQ" async></script>

  </body>
</html>
